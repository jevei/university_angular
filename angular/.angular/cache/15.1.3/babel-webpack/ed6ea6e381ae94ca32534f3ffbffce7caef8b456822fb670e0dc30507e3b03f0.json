{"ast":null,"code":"import { FormControl, FormGroup } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/auth.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"src/app/services/product-api-request.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\nfunction ProductViewComponent_div_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 1);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" Quantit\\u00E9 restante : \", ctx_r0.product.stock, \" \");\n  }\n}\nfunction ProductViewComponent_form_33_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"form\", 7);\n    i0.ɵɵlistener(\"ngSubmit\", function ProductViewComponent_form_33_Template_form_ngSubmit_0_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.updateProduct());\n    });\n    i0.ɵɵelementStart(1, \"div\", 8)(2, \"div\");\n    i0.ɵɵelement(3, \"input\", 9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\");\n    i0.ɵɵelement(5, \"input\", 10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"div\");\n    i0.ɵɵelement(7, \"input\", 11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"div\");\n    i0.ɵɵelement(9, \"input\", 12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"div\");\n    i0.ɵɵelement(11, \"input\", 13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"div\");\n    i0.ɵɵelement(13, \"input\", 14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"div\");\n    i0.ɵɵelement(15, \"input\", 15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"button\", 16);\n    i0.ɵɵtext(17, \" Patch le Produit \");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"formGroup\", ctx_r1.updateProductForm);\n  }\n}\nfunction ProductViewComponent_form_34_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"form\", 7);\n    i0.ɵɵlistener(\"ngSubmit\", function ProductViewComponent_form_34_Template_form_ngSubmit_0_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.deleteProduct());\n    });\n    i0.ɵɵelementStart(1, \"div\", 8)(2, \"button\", 17);\n    i0.ɵɵtext(3, \" Supprimer le Produit \");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"formGroup\", ctx_r2.deleteProductForm);\n  }\n}\nexport class ProductViewComponent {\n  get product() {\n    return this._product;\n  }\n  constructor(authService, route, apiService, router) {\n    this.authService = authService;\n    this.route = route;\n    this.apiService = apiService;\n    this.router = router;\n    this.stockText = 'Demander la disponibilité du produit';\n    this._product = null;\n    console.log('Product Input : ', this.route.snapshot.params['id']);\n    this.apiService.showProduct(this.route.snapshot.params['id']).subscribe(success => {\n      if (success) {\n        console.log('OK', success);\n        this._product = success;\n        console.log(this._product);\n      } else {\n        console.log('ERROR', success);\n        alert('Produit innexistant.');\n        this.router.navigate(['/products']);\n      }\n    });\n    this.deleteProductForm = new FormGroup({});\n    this.updateProductForm = new FormGroup({\n      name: new FormControl(''),\n      stock: new FormControl(''),\n      price: new FormControl(''),\n      expiration: new FormControl(''),\n      description: new FormControl(''),\n      last_input: new FormControl(''),\n      last_output: new FormControl('')\n    });\n  }\n  ngOnInit() {}\n  isAdmin() {\n    return this.authService.currentUser?.is_admin;\n  }\n  deleteProduct() {\n    console.log(this.product);\n    this.apiService.deleteProduct(this.product).subscribe(success => {\n      if (success) {\n        console.log('OK', success);\n        this.apiService.listProducts().subscribe(success => {\n          if (success) {\n            console.log('OK');\n            this.router.navigate(['/products']);\n          } else {\n            console.log('ERROR');\n            alert('ERROR!!!');\n          }\n        });\n      } else {\n        console.log('ERROR');\n        alert('ERROR!!!');\n      }\n    });\n  }\n  updateProduct() {\n    console.log(this.product);\n    if (this.updateProductForm.get('name')?.value != '') {\n      this.product.name = this.updateProductForm.get('name')?.value;\n    }\n    if (this.updateProductForm.get('stock')?.value != '') {\n      this.product.stock = this.updateProductForm.get('stock')?.value;\n    }\n    if (this.updateProductForm.get('price')?.value != '') {\n      this.product.price = this.updateProductForm.get('price')?.value;\n    }\n    if (this.updateProductForm.get('expiration')?.value != '') {\n      this.product.expiration = this.updateProductForm.get('expiration')?.value;\n    }\n    if (this.updateProductForm.get('description')?.value != '') {\n      this.product.description = this.updateProductForm.get('description')?.value;\n    }\n    if (this.updateProductForm.get('last_input')?.value != '') {\n      this.product.last_input = this.updateProductForm.get('last_input')?.value;\n    }\n    if (this.updateProductForm.get('last_output')?.value != '') {\n      this.product.last_output = this.updateProductForm.get('last_output')?.value;\n    }\n    this.apiService.updateProduct(this.product.product_id.toString(), this.product).subscribe(success => {\n      if (success) {\n        console.log('OK', success);\n        this.apiService.listProducts().subscribe(success => {\n          if (success) {\n            console.log('OK');\n          } else {\n            console.log('ERROR');\n            alert('ERROR!!!');\n          }\n        });\n      } else {\n        console.log('ERROR');\n        alert('ERROR!!!');\n      }\n    });\n  }\n  checkStock() {\n    if (this.product?.stock > 0) {\n      this.stockText = 'Produit disponible';\n    } else {\n      this.stockText = 'Produit indisponible';\n    }\n  }\n}\nProductViewComponent.ɵfac = function ProductViewComponent_Factory(t) {\n  return new (t || ProductViewComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i3.ProductApiRequestService), i0.ɵɵdirectiveInject(i2.Router));\n};\nProductViewComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ProductViewComponent,\n  selectors: [[\"app-product-view\"]],\n  decls: 35,\n  vars: 13,\n  consts: [[1, \"container\"], [1, \"row\"], [1, \"col-sm\"], [\"alt\", \"PLACEHOLDER.image\", 1, \"product-image\", 3, \"src\"], [\"class\", \"row\", 4, \"ngIf\"], [1, \"stock-button\", 3, \"click\"], [3, \"formGroup\", \"ngSubmit\", 4, \"ngIf\"], [3, \"formGroup\", \"ngSubmit\"], [1, \"row\", \"form-group\"], [\"formControlName\", \"name\", \"type\", \"text\", \"placeholder\", \"nom\", 1, \"form-control\"], [\"formControlName\", \"stock\", \"type\", \"text\", \"placeholder\", \"stock\", 1, \"form-control\"], [\"formControlName\", \"price\", \"type\", \"text\", \"placeholder\", \"prix\", 1, \"form-control\"], [\"formControlName\", \"expiration\", \"type\", \"text\", \"placeholder\", \"expiration\", 1, \"form-control\"], [\"formControlName\", \"description\", \"type\", \"text\", \"placeholder\", \"description\", 1, \"form-control\"], [\"formControlName\", \"last_input\", \"type\", \"text\", \"placeholder\", \"derni\\u00E8re entr\\u00E9\", 1, \"form-control\"], [\"formControlName\", \"last_output\", \"type\", \"text\", \"placeholder\", \"derni\\u00E8re sortis\", 1, \"form-control\"], [\"type\", \"submit\", 1, \"btn\", \"btn-success\"], [\"type\", \"submit\", 1, \"btn\", \"btn-danger\"]],\n  template: function ProductViewComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 1);\n      i0.ɵɵelement(4, \"img\", 3);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(5, \"div\", 2)(6, \"div\", 1)(7, \"h1\");\n      i0.ɵɵtext(8);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(9, \"div\", 1)(10, \"h2\");\n      i0.ɵɵtext(11);\n      i0.ɵɵpipe(12, \"number\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtemplate(13, ProductViewComponent_div_13_Template, 2, 1, \"div\", 4);\n      i0.ɵɵelementStart(14, \"div\", 1)(15, \"button\", 5);\n      i0.ɵɵlistener(\"click\", function ProductViewComponent_Template_button_click_15_listener() {\n        return ctx.checkStock();\n      });\n      i0.ɵɵtext(16);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(17, \"div\", 1)(18, \"h1\");\n      i0.ɵɵtext(19, \" Description \");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(20, \"div\", 1);\n      i0.ɵɵtext(21);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(22, \"div\", 1)(23, \"h4\");\n      i0.ɵɵtext(24, \" Derni\\u00E8re entr\\u00E9 \");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(25, \"div\", 1);\n      i0.ɵɵtext(26);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(27, \"div\", 1)(28, \"h4\");\n      i0.ɵɵtext(29, \" Derni\\u00E8re sortis \");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(30, \"div\", 1);\n      i0.ɵɵtext(31);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(32, \"div\", 2);\n      i0.ɵɵtemplate(33, ProductViewComponent_form_33_Template, 18, 1, \"form\", 6);\n      i0.ɵɵtemplate(34, ProductViewComponent_form_34_Template, 4, 1, \"form\", 6);\n      i0.ɵɵelementEnd()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(4);\n      i0.ɵɵpropertyInterpolate(\"src\", ctx.product.picture_url, i0.ɵɵsanitizeUrl);\n      i0.ɵɵadvance(4);\n      i0.ɵɵtextInterpolate1(\" \", ctx.product.name, \" \");\n      i0.ɵɵadvance(3);\n      i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(12, 10, ctx.product.price, \"1.2-2\"), \"$ \");\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.isAdmin() == true);\n      i0.ɵɵadvance(3);\n      i0.ɵɵtextInterpolate(ctx.stockText);\n      i0.ɵɵadvance(5);\n      i0.ɵɵtextInterpolate1(\" \", ctx.product.description, \" \");\n      i0.ɵɵadvance(5);\n      i0.ɵɵtextInterpolate1(\" \", ctx.product.last_input, \" \");\n      i0.ɵɵadvance(5);\n      i0.ɵɵtextInterpolate1(\" \", ctx.product.last_output, \" \");\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.isAdmin() == true);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.isAdmin() == true);\n    }\n  },\n  dependencies: [i4.NgIf, i5.ɵNgNoValidate, i5.DefaultValueAccessor, i5.NgControlStatus, i5.NgControlStatusGroup, i5.FormGroupDirective, i5.FormControlName, i4.DecimalPipe],\n  styles: [\".stock-button[_ngcontent-%COMP%] {\\r\\n  background-color: #4CAF50;\\r\\n  border: none;\\r\\n  color: white;\\r\\n  padding: 10px 20px;\\r\\n  text-align: center;\\r\\n  text-decoration: none;\\r\\n  display: inline-block;\\r\\n  font-size: 16px;\\r\\n  margin: 10px;\\r\\n  border-radius: 5px;\\r\\n  cursor: pointer;\\r\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9wcm9kdWN0LXZpZXcvcHJvZHVjdC12aWV3LmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSx5QkFBeUI7RUFDekIsWUFBWTtFQUNaLFlBQVk7RUFDWixrQkFBa0I7RUFDbEIsa0JBQWtCO0VBQ2xCLHFCQUFxQjtFQUNyQixxQkFBcUI7RUFDckIsZUFBZTtFQUNmLFlBQVk7RUFDWixrQkFBa0I7RUFDbEIsZUFBZTtBQUNqQiIsInNvdXJjZXNDb250ZW50IjpbIi5zdG9jay1idXR0b24ge1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICM0Q0FGNTA7XHJcbiAgYm9yZGVyOiBub25lO1xyXG4gIGNvbG9yOiB3aGl0ZTtcclxuICBwYWRkaW5nOiAxMHB4IDIwcHg7XHJcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG4gIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcclxuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XHJcbiAgZm9udC1zaXplOiAxNnB4O1xyXG4gIG1hcmdpbjogMTBweDtcclxuICBib3JkZXItcmFkaXVzOiA1cHg7XHJcbiAgY3Vyc29yOiBwb2ludGVyO1xyXG59XHJcblxyXG4iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n});","map":{"version":3,"mappings":"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","names":["FormControl","FormGroup","i0","ProductViewComponent","product","_product","constructor","authService","route","apiService","router","console","log","snapshot","params","showProduct","subscribe","success","alert","navigate","deleteProductForm","updateProductForm","name","stock","price","expiration","description","last_input","last_output","ngOnInit","isAdmin","currentUser","is_admin","deleteProduct","listProducts","updateProduct","get","value","product_id","toString","checkStock","stockText","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\Predator\\Desktop\\université\\session4\\INF1013\\jxr\\src\\app\\components\\product-view\\product-view.component.ts","C:\\Users\\Predator\\Desktop\\université\\session4\\INF1013\\jxr\\src\\app\\components\\product-view\\product-view.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { FormControl, FormGroup } from '@angular/forms';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { Product } from 'src/app/models/product.model';\r\nimport { AuthService } from 'src/app/services/auth.service';\r\nimport { ProductApiRequestService } from 'src/app/services/product-api-request.service';\r\n\r\n@Component({\r\n  selector: 'app-product-view',\r\n  templateUrl: './product-view.component.html',\r\n  styleUrls: ['./product-view.component.css'],\r\n})\r\nexport class ProductViewComponent implements OnInit {\r\n  deleteProductForm: FormGroup;\r\n  updateProductForm: FormGroup;\r\n  stockText: string = 'Demander la disponibilité du produit';\r\n\r\n  private _product: Product | null = null;\r\n\r\n  get product(): Product {\r\n    return this._product!;\r\n  }\r\n\r\n  constructor(\r\n    private authService: AuthService,\r\n    private route: ActivatedRoute,\r\n    private apiService: ProductApiRequestService,\r\n    private router: Router\r\n  ) {\r\n    console.log('Product Input : ', this.route.snapshot.params['id']);\r\n    this.apiService\r\n      .showProduct(this.route.snapshot.params['id'])\r\n      .subscribe((success) => {\r\n        if (success) {\r\n          console.log('OK', success);\r\n          this._product = success as Product;\r\n          console.log(this._product);\r\n        } else {\r\n          console.log('ERROR', success);\r\n          alert('Produit innexistant.');\r\n          this.router.navigate(['/products']);\r\n        }\r\n      });\r\n    this.deleteProductForm = new FormGroup({});\r\n    this.updateProductForm = new FormGroup({\r\n      name: new FormControl(''),\r\n      stock: new FormControl(''),\r\n      price: new FormControl(''),\r\n      expiration: new FormControl(''),\r\n      description: new FormControl(''),\r\n      last_input: new FormControl(''),\r\n      last_output: new FormControl(''),\r\n    });\r\n  }\r\n\r\n  ngOnInit(): void {}\r\n\r\n  isAdmin(): boolean {\r\n    return this.authService.currentUser?.is_admin!;\r\n  }\r\n\r\n  deleteProduct() {\r\n    console.log(this.product);\r\n    this.apiService.deleteProduct(this.product).subscribe((success) => {\r\n      if (success) {\r\n        console.log('OK', success);\r\n        this.apiService.listProducts().subscribe((success) => {\r\n          if (success) {\r\n            console.log('OK');\r\n            this.router.navigate(['/products']);\r\n          } else {\r\n            console.log('ERROR');\r\n            alert('ERROR!!!');\r\n          }\r\n        });\r\n      } else {\r\n        console.log('ERROR');\r\n        alert('ERROR!!!');\r\n      }\r\n    });\r\n  }\r\n\r\n  updateProduct() {\r\n    console.log(this.product);\r\n    if (this.updateProductForm.get('name')?.value != '') {\r\n      this.product.name = this.updateProductForm.get('name')?.value;\r\n    }\r\n    if (this.updateProductForm.get('stock')?.value != '') {\r\n      this.product.stock = this.updateProductForm.get('stock')?.value;\r\n    }\r\n    if (this.updateProductForm.get('price')?.value != '') {\r\n      this.product.price = this.updateProductForm.get('price')?.value;\r\n    }\r\n    if (this.updateProductForm.get('expiration')?.value != '') {\r\n      this.product.expiration = this.updateProductForm.get('expiration')?.value;\r\n    }\r\n    if (this.updateProductForm.get('description')?.value != '') {\r\n      this.product.description =\r\n        this.updateProductForm.get('description')?.value;\r\n    }\r\n    if (this.updateProductForm.get('last_input')?.value != '') {\r\n      this.product.last_input = this.updateProductForm.get('last_input')?.value;\r\n    }\r\n    if (this.updateProductForm.get('last_output')?.value != '') {\r\n      this.product.last_output =\r\n        this.updateProductForm.get('last_output')?.value;\r\n    }\r\n    this.apiService\r\n      .updateProduct(this.product.product_id.toString(), this.product)\r\n      .subscribe((success) => {\r\n        if (success) {\r\n          console.log('OK', success);\r\n          this.apiService.listProducts().subscribe((success) => {\r\n            if (success) {\r\n              console.log('OK');\r\n            } else {\r\n              console.log('ERROR');\r\n              alert('ERROR!!!');\r\n            }\r\n          });\r\n        } else {\r\n          console.log('ERROR');\r\n          alert('ERROR!!!');\r\n        }\r\n      });\r\n  }\r\n\r\n  checkStock(): void {\r\n    if (this.product?.stock > 0) {\r\n      this.stockText = 'Produit disponible';\r\n    } else {\r\n      this.stockText = 'Produit indisponible';\r\n    }\r\n  }\r\n}\r\n","<div class=\"container\">\r\n  <div class=\"row\">\r\n    <div class=\"col-sm\">\r\n      <div class=\"row\">\r\n        <img src=\"{{ product.picture_url }}\" class=\"w-100 h-100 rounded\" alt=\"PLACEHOLDER.image\" class=\"product-image\">\r\n      </div>\r\n    </div>\r\n    <div class=\"col-sm\">\r\n      <div class=\"row\">\r\n        <h1>\r\n          {{ product.name }}\r\n        </h1>\r\n      </div>\r\n      <div class=\"row\">\r\n        <h2>\r\n          {{ product.price | number : '1.2-2' }}$\r\n        </h2>\r\n      </div>\r\n      <div class=\"row\" *ngIf=\"this.isAdmin()==true\">\r\n        Quantité restante : {{ product.stock }}\r\n      </div>\r\n      <div class=\"row\">\r\n        <button class=\"stock-button\" (click)=\"checkStock()\">{{stockText}}</button>\r\n      </div>\r\n      <div class=\"row\">\r\n        <h1>\r\n          Description\r\n        </h1>\r\n      </div>\r\n      <div class=\"row\">\r\n        {{ product.description }}\r\n\r\n      </div>\r\n      <div class=\"row\">\r\n        <h4>\r\n          Dernière entré\r\n        </h4>\r\n      </div>\r\n      <div class=\"row\">\r\n        {{ product.last_input }}\r\n      </div>\r\n      <div class=\"row\">\r\n        <h4>\r\n          Dernière sortis\r\n        </h4>\r\n      </div>\r\n      <div class=\"row\">\r\n        {{ product.last_output }}\r\n      </div>\r\n    </div>\r\n    <div class=\"col-sm\">\r\n      <form [formGroup]=\"updateProductForm\" (ngSubmit)=\"updateProduct()\" *ngIf=\"this.isAdmin()==true\">\r\n        <div class=\"row form-group\">\r\n          <div>\r\n            <input formControlName=\"name\" type=\"text\" placeholder=\"nom\" class=\"form-control\">\r\n          </div>\r\n          <div>\r\n            <input formControlName=\"stock\" type=\"text\" placeholder=\"stock\" class=\"form-control\">\r\n          </div>\r\n          <div>\r\n            <input formControlName=\"price\" type=\"text\" placeholder=\"prix\" class=\"form-control\">\r\n          </div>\r\n          <div>\r\n            <input formControlName=\"expiration\" type=\"text\" placeholder=\"expiration\" class=\"form-control\">\r\n          </div>\r\n          <div>\r\n            <input formControlName=\"description\" type=\"text\" placeholder=\"description\" class=\"form-control\">\r\n          </div>\r\n          <div>\r\n            <input formControlName=\"last_input\" type=\"text\" placeholder=\"dernière entré\" class=\"form-control\">\r\n          </div>\r\n          <div>\r\n            <input formControlName=\"last_output\" type=\"text\" placeholder=\"dernière sortis\" class=\"form-control\">\r\n          </div>\r\n          <button type=\"submit\" class=\"btn btn-success\">\r\n            Patch le Produit\r\n          </button>\r\n        </div>\r\n      </form>\r\n      <form [formGroup]=\"deleteProductForm\" (ngSubmit)=\"deleteProduct()\" *ngIf=\"this.isAdmin()==true\">\r\n        <div class=\"row form-group\">\r\n          <button type=\"submit\" class=\"btn btn-danger\">\r\n            Supprimer le Produit\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  </div>\r\n</div>\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}